<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Agent Event Log</title>
    <link rel="stylesheet" href="compact.css" />
    <style>
      body {
        font-family: system-ui, sans-serif;
        margin: 0;
        background: #05070f;
        color: #cdd9e5;
      }
      .page {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        max-width: 960px;
        margin: 0 auto;
        padding: 2rem;
      }
      .panel {
        background: #0d1117;
        border: 1px solid #1f2937;
        border-radius: 0.75rem;
        padding: 1.25rem;
        box-shadow: 0 15px 45px rgba(2, 6, 23, 0.45);
      }
      .header-row {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        gap: 1rem;
      }
      h1 {
        margin: 0;
        font-size: 1.6rem;
      }
      .status {
        color: #8b949e;
        font-size: 0.95rem;
      }
      .level-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 0.75rem;
        margin-top: 1rem;
      }
      .level-pill {
        border: none;
        border-radius: 0.65rem;
        padding: 0.75rem 0.9rem;
        font-weight: 600;
        display: flex;
        flex-direction: column;
        gap: 0.35rem;
        background: #161b22;
        color: #e2e8f0;
        cursor: pointer;
        transition: transform 0.15s ease;
      }
      .level-pill.disabled {
        opacity: 0.45;
        cursor: not-allowed;
      }
      .level-pill span {
        font-size: 0.8rem;
        color: #94a3b8;
      }
      .level-pill.critical {
        background: #fde8e3;
        color: #7c1414;
      }
      .level-pill.error {
        background: #fee2b2;
        color: #78350f;
      }
      .level-pill.warning {
        background: #fef08a;
        color: #92400e;
      }
      .level-pill.information {
        background: #c7d2fe;
        color: #312e81;
      }
      .level-pill:not(.disabled):hover {
        transform: translateY(-1px);
      }
      .detail-panel {
        margin-top: 1rem;
        border: 1px solid #1e293b;
        border-radius: 0.75rem;
        padding: 1rem;
        background: #070b14;
      }
      .detail-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 1rem;
      }
      .detail-header h2 {
        margin: 0;
        font-size: 1.1rem;
      }
      .detail-meta {
        margin: 0.25rem 0 0;
        color: #94a3b8;
        font-size: 0.85rem;
      }
      .event-list {
        margin-top: 1rem;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }
      .event-item {
        border: 1px solid #1e293b;
        border-radius: 0.6rem;
        padding: 0.75rem;
        background: #02050c;
      }
      .event-item h4 {
        margin: 0;
        font-size: 0.95rem;
      }
      .event-meta {
        margin: 0.4rem 0;
        color: #8b949e;
        font-size: 0.85rem;
      }
      .event-message {
        margin: 0;
        color: #e2e8f0;
        font-size: 0.9rem;
        line-height: 1.3;
      }
      .placeholder {
        color: #94a3b8;
        font-size: 0.9rem;
      }
      .error-note {
        margin-top: 0.5rem;
        color: #fda4af;
        font-size: 0.9rem;
      }
    </style>
  </head>
  <body>
    <div class="page">
      <section class="panel">
        <div class="header-row">
          <div>
            <h1 id="agentTitle">Agent events</h1>
            <p id="agentMeta" class="status">Loading agent data…</p>
          </div>
          <button id="refreshButton" type="button">Refresh</button>
        </div>
        <div class="level-grid" id="levelGrid">
          <div class="placeholder">Fetching event counts…</div>
        </div>
        <p id="agentError" class="error-note"></p>
        <div class="detail-panel" id="detailPanel">
          <div class="detail-header">
            <div>
              <h2 id="detailLabel">Event entries</h2>
              <p class="detail-meta" id="detailMeta">Select a severity to load entries.</p>
            </div>
            <span id="detailCount" class="status"></span>
          </div>
          <div id="detailList" class="event-list">
            <div class="placeholder">Click a severity badge above.</div>
          </div>
        </div>
      </section>
    </div>
    <script src="agent-health.js"></script>
  </body>
</html>
