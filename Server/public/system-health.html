<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>System Health</title>
    <link rel="stylesheet" href="compact.css" />
    <style>
      body {
        font-family: system-ui, sans-serif;
        margin: 0;
        background: #05070f;
        color: #cdd9e5;
      }

      .page {
        padding: 2rem;
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
        max-width: 1200px;
        margin: 0 auto;
      }

      .hero {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .hero h1 {
        margin: 0;
      }

      .hero p {
        margin: 0;
        color: #8b949e;
      }

      .status-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
      }

      .status-row span {
        color: #8b949e;
        font-size: 0.95rem;
      }

      .panel {
        background: #0d1117;
        border: 1px solid #21262d;
        border-radius: 0.75rem;
        padding: 1.25rem;
        box-shadow: 0 10px 60px rgba(2, 6, 23, 0.45);
      }

      .agent-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 1rem;
      }

      .agent-card {
        border: 1px solid #1e293b;
        border-radius: 0.65rem;
        padding: 0.9rem;
        background: #070b14;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .agent-header {
        display: flex;
        justify-content: space-between;
        gap: 0.75rem;
      }

      .agent-header h3 {
        margin: 0;
        font-size: 1.05rem;
      }

      .agent-meta {
        margin: 0.25rem 0 0;
        color: #8b949e;
        font-size: 0.85rem;
      }

      .status-pill {
        border-radius: 999px;
        padding: 0.25rem 0.7rem;
        font-size: 0.75rem;
        font-weight: 600;
        border: 1px solid transparent;
      }

      .status-pill.online {
        background: #064e3b;
        border-color: #059669;
        color: #dcfce7;
      }

      .status-pill.offline {
        background: #2d1b16;
        border-color: #f97316;
        color: #fee2e2;
      }

      .level-grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 0.6rem;
      }

      .level-pill {
        border: none;
        border-radius: 0.65rem;
        padding: 0.6rem 0.7rem;
        font-weight: 600;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: #161b22;
        color: #e2e8f0;
        cursor: pointer;
        transition: transform 0.15s ease, box-shadow 0.15s ease;
      }

      .level-pill.disabled {
        opacity: 0.45;
        cursor: not-allowed;
      }

      .level-pill.critical {
        background: #fde8e3;
        color: #7c1414;
      }

      .level-pill.error {
        background: #fee2b2;
        color: #78350f;
      }

      .level-pill.warning {
        background: #fef08a;
        color: #92400e;
      }

      .level-pill.information {
        background: #c7d2fe;
        color: #312e81;
      }

      .level-pill:not(.disabled):hover {
        transform: translateY(-1px);
        box-shadow: 0 10px 20px rgba(2, 6, 23, 0.4);
      }

      .agent-note {
        background: #1e1b1b;
        border-radius: 0.5rem;
        padding: 0.45rem 0.6rem;
        font-size: 0.8rem;
        color: #f5f5f5;
        border: 1px solid #313033;
      }

      .detail-panel {
        background: #070b14;
        border: 1px solid #1f2937;
      }

      .detail-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 1rem;
      }

      .detail-header h2 {
        margin: 0;
      }

      .detail-meta {
        color: #94a3b8;
        font-size: 0.9rem;
        margin: 0.35rem 0 0;
      }

      .event-list {
        margin-top: 1rem;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .event-item {
        border: 1px solid #1e293b;
        border-radius: 0.65rem;
        padding: 0.75rem;
        background: #02050c;
      }

      .event-item h4 {
        margin: 0;
        font-size: 0.95rem;
      }

      .event-meta {
        margin: 0.4rem 0;
        color: #8b949e;
        font-size: 0.85rem;
      }

      .event-message {
        margin: 0;
        color: #e2e8f0;
        font-size: 0.9rem;
        line-height: 1.4;
      }

      .placeholder {
        color: #94a3b8;
        font-size: 0.9rem;
      }

      .panel button {
        border-radius: 0.55rem;
        padding: 0.4rem 0.9rem;
        border: none;
        background: linear-gradient(135deg, #2563eb, #7c3aed);
        color: #fff;
        font-weight: 600;
        cursor: pointer;
      }

      .panel button:hover {
        filter: brightness(1.05);
      }

      .detail-close {
        background: #0e0f18;
        border: 1px solid #303245;
        color: #cdd9e5;
        padding: 0.35rem 0.8rem;
      }

      .hidden {
        display: none;
      }

      @media (max-width: 640px) {
        .level-grid {
          grid-template-columns: repeat(1, minmax(0, 1fr));
        }

        .status-row {
          flex-direction: column;
          align-items: flex-start;
        }
      }
    </style>
  </head>
  <body>
    <div class="page">
      <section class="hero">
        <h1>System Health</h1>
        <p>Event log counts over the past week, grouped by severity. Click a level badge to inspect the latest entries.</p>
        <div class="status-row">
          <span id="statusMessage">Loading data…</span>
          <button id="refreshButton" type="button">Refresh data</button>
        </div>
      </section>

      <section class="panel">
        <h2>Agents</h2>
        <div id="agentsContainer" class="agent-grid">
          <div class="placeholder">Loading agents…</div>
        </div>
      </section>

      <section class="panel detail-panel hidden" id="eventDetail">
        <div class="detail-header">
          <div>
            <h2 id="detailTitle">Select a level</h2>
            <p class="detail-meta" id="detailMeta">No entries selected.</p>
          </div>
          <div>
            <span id="detailStatus"></span>
            <button id="detailClose" class="detail-close" type="button">Close</button>
          </div>
        </div>
        <div id="eventList" class="event-list">
          <div class="placeholder">Choose a severity to load event entries.</div>
        </div>
      </section>
    </div>
    <script src="system-health.js"></script>
  </body>
</html>
